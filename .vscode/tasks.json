{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "pytest -q",
      "type": "shell",
      "command": "uv run pytest -q",
      "problemMatcher": ["$python"],
      "group": {
        "kind": "test",
        "isDefault": true
      }
    },
    {
      "label": "mypy",
      "type": "shell",
      "command": "uv run mypy arrem_sync",
      "problemMatcher": [
        {
          "owner": "python",
          "severity": "error",
          "fileLocation": ["relative", "${workspaceFolder}"],
          "pattern": [
            {
              "regexp": "^(.*?):(\\d+):(?: (\\d+):)? error: (.*)$",
              "file": 1,
              "line": 2,
              "column": 3,
              "message": 4
            },
            {
              "regexp": "^(.*?): note: (.*)$",
              "message": 2
            }
          ]
        }
      ],
      "group": "test"
    },
    {
      "label": "pytest (fast-fail)",
      "type": "shell",
      "command": "uv run pytest -q --maxfail=1 -x",
      "problemMatcher": ["$python"],
      "group": "test"
    },
    {
      "label": "pytest -k (pattern)",
      "type": "shell",
      "command": "uv run pytest -q -k \"${input:pytestPattern}\"",
      "problemMatcher": ["$python"],
      "group": "test"
    },
    {
      "label": "pytest (coverage)",
      "type": "shell",
      "command": "uv run pytest -q --cov=arrem_sync --cov-report=term-missing",
      "problemMatcher": ["$python"],
      "group": "test"
    },
    {
      "label": "pytest -q",
      "type": "shell",
      "command": "uv run pytest -q",
      "problemMatcher": ["$python"],
      "group": "test"
    }
  ],
  "inputs": [
    {
      "id": "pytestPattern",
      "type": "promptString",
      "description": "Enter -k test pattern (e.g., test_sync or ClassName and test_name)",
      "default": ""
    }
  ]
}
